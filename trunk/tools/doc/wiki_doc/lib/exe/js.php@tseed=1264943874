var DOKU_BASE='/static/skychart/';var DOKU_TPL='/static/skychart/lib/tpl/skychart/';var DOKU_UHN=0;var DOKU_UHC=0;LANG={"searchmedia":"Search for files","keepopen":"Keep window open on selection","hidedetails":"Hide Details","nosmblinks":"Linking to Windows shares only works in Microsoft Internet Explorer.\nYou still can copy and paste the link.","linkwiz":"Link Wizard","linkto":"Link to:","del_confirm":"Really delete selected item(s)?","mu_btn":"Upload multiple files at once","plugins":[]};var toolbar=[{"type":"format","title":"Bold Text","icon":"bold.png","key":"b","open":"**","close":"**"},{"type":"format","title":"Italic Text","icon":"italic.png","key":"i","open":"\/\/","close":"\/\/"},{"type":"format","title":"Underlined Text","icon":"underline.png","key":"u","open":"__","close":"__"},{"type":"format","title":"Code Text","icon":"mono.png","key":"c","open":"''","close":"''"},{"type":"format","title":"Strike-through Text","icon":"strike.png","key":"d","open":"<del>","close":"<\/del>"},{"type":"autohead","title":"Same Level Headline","icon":"hequal.png","key":"8","text":"Headline","mod":0},{"type":"autohead","title":"Lower Headline","icon":"hminus.png","key":"9","text":"Headline","mod":1},{"type":"autohead","title":"Higher Headline","icon":"hplus.png","key":"0","text":"Headline","mod":-1},{"type":"picker","title":"Select Headline","icon":"h.png","class":"pk_hl","list":[{"type":"format","title":"Level 1 Headline","icon":"h1.png","key":"1","open":"====== ","close":" ======\\n"},{"type":"format","title":"Level 2 Headline","icon":"h2.png","key":"2","open":"===== ","close":" =====\\n"},{"type":"format","title":"Level 3 Headline","icon":"h3.png","key":"3","open":"==== ","close":" ====\\n"},{"type":"format","title":"Level 4 Headline","icon":"h4.png","key":"4","open":"=== ","close":" ===\\n"},{"type":"format","title":"Level 5 Headline","icon":"h5.png","key":"5","open":"== ","close":" ==\\n"}]},{"type":"linkwiz","title":"Internal Link","icon":"link.png","key":"l","open":"[[","close":"]]"},{"type":"format","title":"External Link","icon":"linkextern.png","open":"[[","close":"]]","sample":"http:\/\/example.com|External Link"},{"type":"formatln","title":"Ordered List Item","icon":"ol.png","open":"  - ","close":"","key":"-"},{"type":"formatln","title":"Unordered List Item","icon":"ul.png","open":"  * ","close":"","key":"."},{"type":"insert","title":"Horizontal Rule","icon":"hr.png","insert":"\\n----\\n"},{"type":"mediapopup","title":"Add Images and other files","icon":"image.png","url":"lib\/exe\/mediamanager.php?ns=","name":"mediaselect","options":"width=750,height=500,left=20,top=20,scrollbars=yes,resizable=yes"},{"type":"picker","title":"Smileys","icon":"smiley.png","list":{"8-)":"icon_cool.gif","8-O":"icon_eek.gif","8-o":"icon_eek.gif",":-(":"icon_sad.gif",":-)":"icon_smile.gif","=)":"icon_smile2.gif",":-\/":"icon_doubt.gif",":-\\":"icon_doubt2.gif",":-?":"icon_confused.gif",":-D":"icon_biggrin.gif",":-P":"icon_razz.gif",":-o":"icon_surprised.gif",":-O":"icon_surprised.gif",":-x":"icon_silenced.gif",":-X":"icon_silenced.gif",":-|":"icon_neutral.gif",";-)":"icon_wink.gif","^_^":"icon_fun.gif",":?:":"icon_question.gif",":!:":"icon_exclaim.gif","LOL":"icon_lol.gif","FIXME":"fixme.gif","DELETEME":"delete.gif"},"icobase":"smileys"},{"type":"picker","title":"Special Chars","icon":"chars.png","list":["\u00c0","\u00e0","\u00c1","\u00e1","\u00c2","\u00e2","\u00c3","\u00e3","\u00c4","\u00e4","\u01cd","\u01ce","\u0102","\u0103","\u00c5","\u00e5","\u0100","\u0101","\u0104","\u0105","\u00c6","\u00e6","\u0106","\u0107","\u00c7","\u00e7","\u010c","\u010d","\u0108","\u0109","\u010a","\u010b","\u00d0","\u0111","\u00f0","\u010e","\u010f","\u00c8","\u00e8","\u00c9","\u00e9","\u00ca","\u00ea","\u00cb","\u00eb","\u011a","\u011b","\u0112","\u0113","\u0116","\u0117","\u0118","\u0119","\u0122","\u0123","\u011c","\u011d","\u011e","\u011f","\u0120","\u0121","\u0124","\u0125","\u00cc","\u00ec","\u00cd","\u00ed","\u00ce","\u00ee","\u00cf","\u00ef","\u01cf","\u01d0","\u012a","\u012b","\u0130","\u0131","\u012e","\u012f","\u0134","\u0135","\u0136","\u0137","\u0139","\u013a","\u013b","\u013c","\u013d","\u013e","\u0141","\u0142","\u013f","\u0140","\u0143","\u0144","\u00d1","\u00f1","\u0145","\u0146","\u0147","\u0148","\u00d2","\u00f2","\u00d3","\u00f3","\u00d4","\u00f4","\u00d5","\u00f5","\u00d6","\u00f6","\u01d1","\u01d2","\u014c","\u014d","\u0150","\u0151","\u0152","\u0153","\u00d8","\u00f8","\u0154","\u0155","\u0156","\u0157","\u0158","\u0159","\u015a","\u015b","\u015e","\u015f","\u0160","\u0161","\u015c","\u015d","\u0162","\u0163","\u0164","\u0165","\u00d9","\u00f9","\u00da","\u00fa","\u00db","\u00fb","\u00dc","\u00fc","\u01d3","\u01d4","\u016c","\u016d","\u016a","\u016b","\u016e","\u016f","\u01d6","\u01d8","\u01da","\u01dc","\u0172","\u0173","\u0170","\u0171","\u0174","\u0175","\u00dd","\u00fd","\u0178","\u00ff","\u0176","\u0177","\u0179","\u017a","\u017d","\u017e","\u017b","\u017c","\u00de","\u00fe","\u00df","\u0126","\u0127","\u00bf","\u00a1","\u00a2","\u00a3","\u00a4","\u00a5","\u20ac","\u00a6","\u00a7","\u00aa","\u00ac","\u00af","\u00b0","\u00b1","\u00f7","\u2030","\u00bc","\u00bd","\u00be","\u00b9","\u00b2","\u00b3","\u00b5","\u00b6","\u2020","\u2021","\u00b7","\u2022","\u00ba","\u2200","\u2202","\u2203","\u018f","\u0259","\u2205","\u2207","\u2208","\u2209","\u220b","\u220f","\u2211","\u203e","\u2212","\u2217","\u221a","\u221d","\u221e","\u2220","\u2227","\u2228","\u2229","\u222a","\u222b","\u2234","\u223c","\u2245","\u2248","\u2260","\u2261","\u2264","\u2265","\u2282","\u2283","\u2284","\u2286","\u2287","\u2295","\u2297","\u22a5","\u22c5","\u25ca","\u2118","\u2111","\u211c","\u2135","\u2660","\u2663","\u2665","\u2666","\u03b1","\u03b2","\u0393","\u03b3","\u0394","\u03b4","\u03b5","\u03b6","\u03b7","\u0398","\u03b8","\u03b9","\u03ba","\u039b","\u03bb","\u03bc","\u039e","\u03be","\u03a0","\u03c0","\u03c1","\u03a3","\u03c3","\u03a4","\u03c4","\u03c5","\u03a6","\u03c6","\u03c7","\u03a8","\u03c8","\u03a9","\u03c9","\u2605","\u2606","\u260e","\u261a","\u261b","\u261c","\u261d","\u261e","\u261f","\u2639","\u263a","\u2714","\u2718","\u00d7","\u201e","\u201c","\u201d","\u201a","\u2018","\u2019","\u00ab","\u00bb","\u2039","\u203a","\u2014","\u2013","\u2026","\u2190","\u2191","\u2192","\u2193","\u2194","\u21d0","\u21d1","\u21d2","\u21d3","\u21d4","\u00a9","\u2122","\u00ae","\u2032","\u2033","[","]","{","}","~","(",")","%","\u00a7","$","#","|","@"]},{"type":"signature","title":"Insert Signature","icon":"sig.png","key":"y"}];function isUndefined(prop){return(typeof prop=='undefined');}function isFunction(prop){return(typeof prop=='function');}function isString(prop){return(typeof prop=='string');}function isNumber(prop){return(typeof prop=='number');}function isNumeric(prop){return isNumber(prop)&&!isNaN(prop)&&isFinite(prop);}function isArray(prop){return(prop instanceof Array);}function isRegExp(prop){return(prop instanceof RegExp);}function isBoolean(prop){return('boolean'==typeof prop);}function isScalar(prop){return isNumeric(prop)||isString(prop);}function isEmpty(prop){if(isBoolean(prop))return false;if(isRegExp(prop)&&new RegExp("").toString()==prop.toString())return true;if(isString(prop)||isNumber(prop))return!prop;if(Boolean(prop)&&false!=prop){for(var i in prop)if(prop.hasOwnProperty(i))return false}return true;}if('undefined'==typeof Object.hasOwnProperty){Object.prototype.hasOwnProperty=function(prop){return!('undefined'==typeof this[prop]||this.constructor&&this.constructor.prototype[prop]&&this[prop]===this.constructor.prototype[prop]);}}function hasFlash(version){var ver=0;try{if(navigator.plugins!=null&&navigator.plugins.length>0){ver=navigator.plugins["Shockwave Flash"].description.split(' ')[2].split('.')[0];}else{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");ver=axo.GetVariable("$version").split(' ')[1].split(',')[0];}}catch(e){}if(ver>=version)return true;return false;}function addEvent(element,type,handler){if(!handler.$$guid)handler.$$guid=addEvent.guid++;if(!element.events)element.events={};var handlers=element.events[type];if(!handlers){handlers=element.events[type]={};if(element["on"+type]){handlers[0]=element["on"+type];}}handlers[handler.$$guid]=handler;element["on"+type]=handleEvent;};addEvent.guid=1;function removeEvent(element,type,handler){if(element.events&&element.events[type]){delete element.events[type][handler.$$guid];}};function handleEvent(event){var returnValue=true;event=event||fixEvent(window.event);var handlers=this.events[event.type];for(var i in handlers){if(!handlers.hasOwnProperty(i))continue;this.$$handleEvent=handlers[i];if(this.$$handleEvent(event)===false){returnValue=false;}}return returnValue;};function fixEvent(event){event.preventDefault=fixEvent.preventDefault;event.stopPropagation=fixEvent.stopPropagation;event.target=event.srcElement;return event;};fixEvent.preventDefault=function(){this.returnValue=false;};fixEvent.stopPropagation=function(){this.cancelBubble=true;};window.fireoninit=function(){if(arguments.callee.done)return;arguments.callee.done=true;if(_timer){clearInterval(_timer);_timer=null;}if(typeof window.oninit=='function'){window.oninit();}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",window.fireoninit,null);}/*@cc_on @*//*@if(@_win32)document.write("<scr"+"ipt id=\"__ie_init\" defer=\"true\" src=\"//:\"><\/script>");var script=document.getElementById("__ie_init");script.onreadystatechange=function(){if(this.readyState=="complete"){window.fireoninit();}};/*@end @*/if(/WebKit/i.test(navigator.userAgent)){var _timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){window.fireoninit();}},10);}window.onload=window.fireoninit;window.oninit=function(){};function addInitEvent(func){var oldoninit=window.oninit;if(typeof window.oninit!='function'){window.oninit=func;}else{window.oninit=function(){oldoninit();func();};}}function bind(fnc){var args=Array.prototype.slice.call(arguments,1);return function(){return fnc.apply(this,args);}}DokuCookie={data:Array(),name:'DOKU_PREFS',setValue:function(key,val){DokuCookie.init();DokuCookie.data[key]=val;var now=new Date();DokuCookie.fixDate(now);now.setTime(now.getTime()+365*24*60*60*1000);var text='';for(var key in DokuCookie.data){if(!DokuCookie.data.hasOwnProperty(key))continue;text+='#'+escape(key)+'#'+DokuCookie.data[key];}DokuCookie.setCookie(DokuCookie.name,text.substr(1),now,DOKU_BASE);},getValue:function(key){DokuCookie.init();return DokuCookie.data[key];},init:function(){if(DokuCookie.data.length)return;var text=DokuCookie.getCookie(DokuCookie.name);if(text){var parts=text.split('#');for(var i=0;i<parts.length;i+=2){DokuCookie.data[unescape(parts[i])]=unescape(parts[i+1]);}}},setCookie:function(name,value,expires,path,domain,secure){var curCookie=name+"="+escape(value)+((expires)?"; expires="+expires.toGMTString():"")+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+((secure)?"; secure":"");document.cookie=curCookie;},getCookie:function(name){var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!==0){return null;}}else{begin+=2;}var end=document.cookie.indexOf(";",begin);if(end==-1){end=dc.length;}return unescape(dc.substring(begin+prefix.length,end));},fixDate:function(date){var base=new Date(0);var skew=base.getTime();if(skew>0){date.setTime(date.getTime()-skew);}}};var clientPC=navigator.userAgent.toLowerCase();var is_macos=navigator.appVersion.indexOf('Mac')!=-1;var is_gecko=((clientPC.indexOf('gecko')!=-1)&&(clientPC.indexOf('spoofer')==-1)&&(clientPC.indexOf('khtml')==-1)&&(clientPC.indexOf('netscape/7.0')==-1));var is_safari=((clientPC.indexOf('AppleWebKit')!=-1)&&(clientPC.indexOf('spoofer')==-1));var is_khtml=(navigator.vendor=='KDE'||(document.childNodes&&!document.all&&!navigator.taintEnabled));if(clientPC.indexOf('opera')!=-1){var is_opera=true;var is_opera_preseven=(window.opera&&!document.childNodes);var is_opera_seven=(window.opera&&document.childNodes);}function $(){var elements=new Array();for(var i=0;i<arguments.length;i++){var element=arguments[i];if(typeof element=='string')element=document.getElementById(element);if(arguments.length==1)return element;elements.push(element);}return elements;}function isset(varname){return(typeof(window[varname])!='undefined');}function getElementsByClass(searchClass,node,tag){var classElements=new Array();if(node==null)node=document;if(tag==null)tag='*';var els=node.getElementsByTagName(tag);var elsLen=els.length;var pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");for(var i=0,j=0;i<elsLen;i++){if(pattern.test(els[i].className)){classElements[j]=els[i];j++;}}return classElements;}function findPosX(object){var curleft=0;var obj=$(object);if(obj.offsetParent){while(obj.offsetParent){curleft+=obj.offsetLeft;obj=obj.offsetParent;}}else if(obj.x){curleft+=obj.x;}return curleft;}function findPosY(object){var curtop=0;var obj=$(object);if(obj.offsetParent){while(obj.offsetParent){curtop+=obj.offsetTop;obj=obj.offsetParent;}}else if(obj.y){curtop+=obj.y;}return curtop;}function jsEscape(text){var re=new RegExp("\\\\","g");text=text.replace(re,"\\\\");re=new RegExp("'","g");text=text.replace(re,"\\'");re=new RegExp('"',"g");text=text.replace(re,'&quot;');re=new RegExp("\\\\\\\\n","g");text=text.replace(re,"\\n");return text;}function escapeQuotes(text){var re=new RegExp("'","g");text=text.replace(re,"\\'");re=new RegExp('"',"g");text=text.replace(re,'&quot;');re=new RegExp("\\n","g");text=text.replace(re,"\\n");return text;}function prependChild(parent,element){if(!parent.firstChild){parent.appendChild(element);}else{parent.insertBefore(element,parent.firstChild);}}function showLoadBar(){document.write('<img src="'+DOKU_BASE+'lib/images/loading.gif" '+'width="150" height="12" alt="..." />');}function hideLoadBar(id){obj=$(id);if(obj)obj.style.display="none";}function addTocToggle(){if(!document.getElementById)return;var header=$('toc__header');if(!header)return;var toc=$('toc__inside');var obj=document.createElement('span');obj.id='toc__toggle';obj.style.cursor='pointer';if(toc&&toc.style.display=='none'){obj.innerHTML='<span>+</span>';obj.className='toc_open';}else{obj.innerHTML='<span>&minus;</span>';obj.className='toc_close';}prependChild(header,obj);obj.parentNode.onclick=toggleToc;try{obj.parentNode.style.cursor='pointer';obj.parentNode.style.cursor='hand';}catch(e){}}function toggleToc(){var toc=$('toc__inside');var obj=$('toc__toggle');if(toc.style.display=='none'){toc.style.display='';obj.innerHTML='<span>&minus;</span>';obj.className='toc_close';}else{toc.style.display='none';obj.innerHTML='<span>+</span>';obj.className='toc_open';}}function footnote(e){var obj=e.target;var id=obj.id.substr(5);var fndiv=$('insitu__fn');if(!fndiv){fndiv=document.createElement('div');fndiv.id='insitu__fn';fndiv.className='insitu-footnote JSpopup dokuwiki';addEvent(fndiv,'mouseout',function(e){if(e.target!=fndiv){e.stopPropagation();return;}if(e.pageX){var bx1=findPosX(fndiv);var bx2=bx1+fndiv.offsetWidth;var by1=findPosY(fndiv);var by2=by1+fndiv.offsetHeight;var x=e.pageX;var y=e.pageY;if(x>bx1&&x<bx2&&y>by1&&y<by2){e.stopPropagation();return;}}else{if(e.offsetX>0&&e.offsetX<fndiv.offsetWidth-1&&e.offsetY>0&&e.offsetY<fndiv.offsetHeight-1){e.stopPropagation();return;}}fndiv.style.display='none';});document.body.appendChild(fndiv);}var a=$("fn__"+id);if(!a){return;}var content=new String(a.parentNode.parentNode.innerHTML);content=content.replace(/<sup>.*<\/sup>/gi,'');content=content.replace(/^\s+(,\s+)+/,'');content=content.replace(/\bid=\"(.*?)\"/gi,'id="insitu__$1');fndiv.innerHTML=content;var x;var y;if(e.pageX){x=e.pageX;y=e.pageY;}else{x=e.offsetX;y=e.offsetY;}fndiv.style.position='absolute';fndiv.style.left=(x+2)+'px';fndiv.style.top=(y+2)+'px';fndiv.style.display='';}addInitEvent(function(){var elems=getElementsByClass('fn_top',null,'a');for(var i=0;i<elems.length;i++){addEvent(elems[i],'mouseover',function(e){footnote(e);});}});function initSizeCtl(ctlid,edid){if(!document.getElementById){return;}var ctl=$(ctlid);var textarea=$(edid);if(!ctl||!textarea)return;var hgt=DokuCookie.getValue('sizeCtl');if(hgt){textarea.style.height=hgt;}else{textarea.style.height='300px';}var wrp=DokuCookie.getValue('wrapCtl');if(wrp){setWrap(textarea,wrp);}var l=document.createElement('img');var s=document.createElement('img');var w=document.createElement('img');l.src=DOKU_BASE+'lib/images/larger.gif';s.src=DOKU_BASE+'lib/images/smaller.gif';w.src=DOKU_BASE+'lib/images/wrap.gif';addEvent(l,'click',function(){sizeCtl(edid,100);});addEvent(s,'click',function(){sizeCtl(edid,-100);});addEvent(w,'click',function(){toggleWrap(edid);});ctl.appendChild(l);ctl.appendChild(s);ctl.appendChild(w);}function sizeCtl(edid,val){var textarea=$(edid);var height=parseInt(textarea.style.height.substr(0,textarea.style.height.length-2));height+=val;textarea.style.height=height+'px';DokuCookie.setValue('sizeCtl',textarea.style.height);}function toggleWrap(edid){var textarea=$(edid);var wrap=textarea.getAttribute('wrap');if(wrap&&wrap.toLowerCase()=='off'){setWrap(textarea,'soft');}else{setWrap(textarea,'off');}DokuCookie.setValue('wrapCtl',textarea.getAttribute('wrap'));}function setWrap(textarea,wrapAttrValue){textarea.setAttribute('wrap',wrapAttrValue);var parNod=textarea.parentNode;var nxtSib=textarea.nextSibling;parNod.removeChild(textarea);parNod.insertBefore(textarea,nxtSib);}function closePopups(){if(!document.getElementById){return;}var divs=document.getElementsByTagName('div');for(var i=0;i<divs.length;i++){if(divs[i].className.indexOf('JSpopup')!=-1){divs[i].style.display='none';}}}function scrollToMarker(){var obj=$('scroll__here');if(obj)obj.scrollIntoView();}function focusMarker(){var obj=$('focus__this');if(obj)obj.focus();}function cleanMsgArea(){var elems=getElementsByClass('(success|info|error)',document,'div');if(elems){for(var i=0;i<elems.length;i++){elems[i].style.display='none';}}}addInitEvent(function(){var revForm=$('page__revisions');if(!revForm)return;var elems=revForm.elements;var countTicks=0;for(var i=0;i<elems.length;i++){var input1=elems[i];if(input1.type=='checkbox'){addEvent(input1,'click',function(e){if(this.checked)countTicks++;else countTicks--;for(var j=0;j<elems.length;j++){var input2=elems[j];if(countTicks>=2)input2.disabled=(input2.type=='checkbox'&&!input2.checked);else input2.disabled=(input2.type!='checkbox');}});input1.checked=false;}else if(input1.type=='submit'){input1.disabled=true;}}});addInitEvent(function(){var selector=$('action__selector');if(!selector)return;addEvent(selector,'change',function(e){this.form.submit();});$('action__selectorbtn').style.display='none';});function checkWindowsShares(){if(!LANG['nosmblinks'])return true;var elems=getElementsByClass('windows',document,'a');if(elems){for(var i=0;i<elems.length;i++){var share=elems[i];addEvent(share,'click',function(){if(document.all==null){alert(LANG['nosmblinks']);}});}}}addInitEvent(function(){checkWindowsShares();});addInitEvent(function(){var break_classes=new RegExp('secedit|toc|page');var btns=getElementsByClass('btn_secedit',document,'form');for(var i=0;i<btns.length;i++){addEvent(btns[i],'mouseover',function(e){var tgt=e.target;if(tgt.form)tgt=tgt.form;tgt=tgt.parentNode.previousSibling;if(tgt.nodeName!="DIV")tgt=tgt.previousSibling;while(!break_classes.test(tgt.className)){tgt.className+=' section_highlight';if(tgt.tagName=='H1')break;tgt=(tgt.previousSibling!=null)?tgt.previousSibling:tgt.parentNode;}});addEvent(btns[i],'mouseout',function(e){var secs=getElementsByClass('section_highlight');for(var j=0;j<secs.length;j++){secs[j].className=secs[j].className.replace(/section_highlight/,'');}var secs=getElementsByClass('section_highlight');});}});function sack(file){this.AjaxFailedAlert="Your browser does not support the enhanced functionality of this website, and therefore you will have an experience that differs from the intended one.\n";this.requestFile=file;this.method="POST";this.URLString="";this.encodeURIString=true;this.execute=false;this.onLoading=function(){};this.onLoaded=function(){};this.onInteractive=function(){};this.onCompletion=function(){};this.afterCompletion=function(){};this.createAJAX=function(){try{this.xmlhttp=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{this.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}catch(err){this.xmlhttp=null;}}if(!this.xmlhttp&&typeof XMLHttpRequest!="undefined"){this.xmlhttp=new XMLHttpRequest();}if(!this.xmlhttp){this.failed=true;}};this.setVar=function(name,value){if(this.URLString.length<3){this.URLString=name+"="+value;}else{this.URLString+="&"+name+"="+value;}};this.encVar=function(name,value){var varString=encodeURIComponent(name)+"="+encodeURIComponent(value);return varString;};this.encodeURLString=function(string){varArray=string.split('&');for(i=0;i<varArray.length;i++){urlVars=varArray[i].split('=');if(urlVars[0].indexOf('amp;')!=-1){urlVars[0]=urlVars[0].substring(4);}varArray[i]=this.encVar(urlVars[0],urlVars[1]);}return varArray.join('&');};this.runResponse=function(){eval(this.response);};this.runAJAX=function(urlstring){this.responseStatus=new Array(2);if(this.failed&&this.AjaxFailedAlert){alert(this.AjaxFailedAlert);}else{if(urlstring){if(this.URLString.length){this.URLString=this.URLString+"&"+urlstring;}else{this.URLString=urlstring;}}if(this.encodeURIString){var timeval=new Date().getTime();this.URLString=this.encodeURLString(this.URLString);this.setVar("rndval",timeval);}if(this.element){this.elementObj=document.getElementById(this.element);}if(this.xmlhttp){var self=this;if(this.method=="GET"){var totalurlstring=this.requestFile+"?"+this.URLString;this.xmlhttp.open(this.method,totalurlstring,true);}else{this.xmlhttp.open(this.method,this.requestFile,true);}if(this.method=="POST"){try{this.xmlhttp.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=UTF-8');}catch(e){}}this.xmlhttp.onreadystatechange=function(){switch(self.xmlhttp.readyState){case 1:self.onLoading();break;case 2:self.onLoaded();break;case 3:self.onInteractive();break;case 4:self.response=self.xmlhttp.responseText;self.responseXML=self.xmlhttp.responseXML;self.responseStatus[0]=self.xmlhttp.status;self.responseStatus[1]=self.xmlhttp.statusText;self.onCompletion();if(self.execute){self.runResponse();}if(self.elementObj){var elemNodeName=self.elementObj.nodeName;elemNodeName.toLowerCase();if(elemNodeName=="input"||elemNodeName=="select"||elemNodeName=="option"||elemNodeName=="textarea"){self.elementObj.value=self.response;}else{self.elementObj.innerHTML=self.response;}}self.afterCompletion();self.URLString="";break;}};this.xmlhttp.send(this.URLString);}}};this.createAJAX();}function ajax_qsearch_class(){this.sack=null;this.inObj=null;this.outObj=null;this.timer=null;}var ajax_qsearch=new ajax_qsearch_class();ajax_qsearch.sack=new sack(DOKU_BASE+'lib/exe/ajax.php');ajax_qsearch.sack.AjaxFailedAlert='';ajax_qsearch.sack.encodeURIString=false;ajax_qsearch.init=function(inID,outID){ajax_qsearch.inObj=document.getElementById(inID);ajax_qsearch.outObj=document.getElementById(outID);if(ajax_qsearch.inObj===null){return;}if(ajax_qsearch.outObj===null){return;}addEvent(ajax_qsearch.inObj,'keyup',ajax_qsearch.call);addEvent(ajax_qsearch.outObj,'click',function(){ajax_qsearch.outObj.style.display='none';});};ajax_qsearch.clear=function(){ajax_qsearch.outObj.style.display='none';ajax_qsearch.outObj.innerHTML='';if(ajax_qsearch.timer!==null){window.clearTimeout(ajax_qsearch.timer);ajax_qsearch.timer=null;}};ajax_qsearch.exec=function(){ajax_qsearch.clear();var value=ajax_qsearch.inObj.value;if(value===''){return;}ajax_qsearch.sack.runAJAX('call=qsearch&q='+encodeURI(value));};ajax_qsearch.sack.onCompletion=function(){var data=ajax_qsearch.sack.response;if(data===''){return;}ajax_qsearch.outObj.innerHTML=data;ajax_qsearch.outObj.style.display='block';};ajax_qsearch.call=function(){ajax_qsearch.clear();ajax_qsearch.timer=window.setTimeout("ajax_qsearch.exec()",500);};var index={throbber_delay:500,treeattach:function(obj){if(!obj)return;var items=getElementsByClass('idx_dir',obj,'a');for(var i=0;i<items.length;i++){var elem=items[i];addEvent(elem,'click',function(e){return index.toggle(e,this);});var listitem=elem.parentNode;while(listitem.tagName!='LI'){listitem=listitem.parentNode;}if(listitem.getElementsByTagName('ul').length){listitem.open=true;}}},toggle:function(e,clicky){var listitem=clicky.parentNode.parentNode;listitem.open=!listitem.open;var sublists=listitem.getElementsByTagName('ul');if(!listitem.open){if(sublists.length){sublists[0].style.display='none';}listitem.className='closed';e.preventDefault();return false;}if(sublists.length&&listitem.open){sublists[0].style.display='';listitem.className='open';e.preventDefault();return false;}var ajax=new sack(DOKU_BASE+'lib/exe/ajax.php');ajax.AjaxFailedAlert='';ajax.encodeURIString=false;if(ajax.failed)return true;var ul=document.createElement('ul');ul.className='idx';timeout=window.setTimeout(function(){if(listitem.open){ul.innerHTML='<li><img src="'+DOKU_BASE+'lib/images/throbber.gif" alt="loading..." title="loading..." /></li>';listitem.appendChild(ul);listitem.className='open';}},this.throbber_delay);ajax.elementObj=ul;ajax.afterCompletion=function(){window.clearTimeout(timeout);index.treeattach(ul);if(listitem.className!='open'){if(!listitem.open){ul.style.display='none';}listitem.appendChild(ul);if(listitem.open){listitem.className='open';}}};ajax.runAJAX(clicky.search.substr(1)+'&call=index');e.preventDefault();return false;}};addInitEvent(function(){index.treeattach($('index__tree'));});var drag={obj:null,handle:null,oX:0,oY:0,eX:0,eY:0,attach:function(obj,handle){if(handle){handle.dragobject=obj;addEvent($(handle),'mousedown',drag.start);}else{addEvent($(obj),'mousedown',drag.start);}},start:function(e){drag.handle=e.target;if(drag.handle.dragobject){drag.obj=drag.handle.dragobject;}else{drag.obj=drag.handle;}drag.handle.className+=' ondrag';drag.obj.className+=' ondrag';drag.oX=parseInt(drag.obj.style.left);drag.oY=parseInt(drag.obj.style.top);drag.eX=drag.evX(e);drag.eY=drag.evY(e);addEvent(document,'mousemove',drag.drag);addEvent(document,'mouseup',drag.stop);e.preventDefault();e.stopPropagation();return false;},stop:function(){drag.handle.className=drag.handle.className.replace(/ ?ondrag/,'');drag.obj.className=drag.obj.className.replace(/ ?ondrag/,'');removeEvent(document,'mousemove',drag.drag);removeEvent(document,'mouseup',drag.stop);drag.obj=null;drag.handle=null;},drag:function(e){if(drag.obj){drag.obj.style.top=(drag.evY(e)+drag.oY-drag.eY+'px');drag.obj.style.left=(drag.evX(e)+drag.oX-drag.eX+'px');}},evX:function(e){return(e.pageX)?e.pageX:e.clientX+document.body.scrollTop;},evY:function(e){return(e.pageY)?e.pageY:e.clientY+document.body.scrollTop;}};function selection_class(){this.start=0;this.end=0;this.obj=null;this.rangeCopy=null;this.scroll=0;this.fix=0;this.getLength=function(){return this.end-this.start;};this.getText=function(){if(!this.obj)return'';return this.obj.value.substring(this.start,this.end);}}function getSelection(textArea){var sel=new selection_class();sel.obj=textArea;sel.start=textArea.value.length;sel.end=textArea.value.length;textArea.focus();if(document.getSelection){sel.start=textArea.selectionStart;sel.end=textArea.selectionEnd;sel.scroll=textArea.scrollTop;}else if(document.selection){sel.rangeCopy=document.selection.createRange().duplicate();var before_range=document.body.createTextRange();before_range.moveToElementText(textArea);before_range.setEndPoint("EndToStart",sel.rangeCopy);var before_finished=false,selection_finished=false;var before_text,selection_text;before_text=before_range.text;selection_text=sel.rangeCopy.text;sel.start=before_text.length;sel.end=sel.start+selection_text.length;do{if(!before_finished){if(before_range.compareEndPoints("StartToEnd",before_range)==0){before_finished=true;}else{before_range.moveEnd("character",-1);if(before_range.text==before_text){sel.start+=2;sel.end+=2;}else{before_finished=true;}}}if(!selection_finished){if(sel.rangeCopy.compareEndPoints("StartToEnd",sel.rangeCopy)==0){selection_finished=true;}else{sel.rangeCopy.moveEnd("character",-1);if(sel.rangeCopy.text==selection_text){sel.end+=2;}else{selection_finished=true;}}}}while((!before_finished||!selection_finished));var countNL=function(str){var m=str.split("\r\n");if(!m||!m.length)return 0;return m.length-1;};sel.fix=countNL(sel.obj.value.substring(0,sel.start));}return sel;}function setSelection(selection){if(document.getSelection){selection.obj.setSelectionRange(selection.start,selection.end);if(selection.scroll)selection.obj.scrollTop=selection.scroll;}else if(document.selection){selection.rangeCopy.collapse(true);selection.rangeCopy.moveStart('character',selection.start-selection.fix);selection.rangeCopy.moveEnd('character',selection.end-selection.start);selection.rangeCopy.select();}}function pasteText(selection,text,opts){if(!opts)opts={};selection.obj.value=selection.obj.value.substring(0,selection.start)+text+selection.obj.value.substring(selection.end,selection.obj.value.length);selection.end=selection.start+text.length;if(opts.startofs)selection.start+=opts.startofs;if(opts.endofs)selection.end-=opts.endofs;if(opts.nosel)selection.start=selection.end;setSelection(selection);}function insertTags(textAreaID,tagOpen,tagClose,sampleText){var txtarea=$(textAreaID);var selection=getSelection(txtarea);var text=selection.getText();var opts;if(text.charAt(text.length-1)==' '){selection.end--;text=selection.getText();}if(!text){text=sampleText;opts={startofs:tagOpen.length,endofs:tagClose.length};}else{opts={nosel:true};}text=tagOpen+text+tagClose;pasteText(selection,text,opts);}function insertAtCarret(textAreaID,text){var txtarea=$(textAreaID);var selection=getSelection(txtarea);pasteText(selection,text,{nosel:true});}var pickercounter=0;function initToolbar(tbid,edid,tb){var toolbar=$(tbid);if(!toolbar)return;var edit=$(edid);if(!edit)return;if(edit.readOnly)return;toolbar.innerHTML='';var cnt=tb.length;for(var i=0;i<cnt;i++){var actionFunc;var btn=createToolButton(tb[i]['icon'],tb[i]['title'],tb[i]['key']);actionFunc='tb_'+tb[i]['type'];if(isFunction(window[actionFunc])){addEvent(btn,'click',bind(window[actionFunc],btn,tb[i],edid));toolbar.appendChild(btn);continue;}actionFunc='addBtnAction'+tb[i]['type'].charAt(0).toUpperCase()+tb[i]['type'].substring(1);if(isFunction(window[actionFunc])){if(window[actionFunc](btn,tb[i],edid)){toolbar.appendChild(btn);}continue;}alert('unknown toolbar type: '+tb[i]['type']+'  '+actionFunc);}}function tb_format(btn,props,edid){var sample=props['title'];if(props['sample']){sample=props['sample'];}insertTags(edid,fixtxt(props['open']),fixtxt(props['close']),fixtxt(sample));pickerClose();return false;}function tb_formatln(btn,props,edid){var sample=props['title'];if(props['sample']){sample=props['sample'];}sample=fixtxt(sample);props['open']=fixtxt(props['open']);props['close']=fixtxt(props['close']);var opts;var selection=getSelection($(edid));if(selection.getLength()){sample=selection.getText();opts={nosel:true};}else{opts={startofs:props['open'].length,endofs:props['close'].length};}sample=sample.split("\n").join(props['close']+"\n"+props['open']);sample=props['open']+sample+props['close'];pasteText(selection,sample,opts);pickerClose();return false;}function tb_insert(btn,props,edid){insertAtCarret(edid,fixtxt(props['insert']));pickerClose();return false;}function tb_mediapopup(btn,props,edid){window.open(DOKU_BASE+props['url']+encodeURIComponent(NS),props['name'],props['options']);return false;}function tb_autohead(btn,props,edid){var lvl=currentHeadlineLevel(edid);lvl+=props['mod'];if(lvl<1)lvl=1;if(lvl>5)lvl=5;var tags='=';for(var i=0;i<=5-lvl;i++)tags+='=';insertTags(edid,tags+' ',' '+tags+"\n",props['text']);pickerClose();return false;}function addBtnActionPicker(btn,props,edid){var pickerid='picker'+(pickercounter++);createPicker(pickerid,props,edid);addEvent(btn,'click',function(){pickerToggle(pickerid,btn);return false;});return true;}function addBtnActionLinkwiz(btn,props,edid){linkwiz.init($(edid));addEvent(btn,'click',function(){linkwiz.toggle();return false;});return true;}function pickerToggle(pickerid,btn){var picker=$(pickerid);if(picker.style.marginLeft=='-10000px'){var x=findPosX(btn);var y=findPosY(btn);picker.style.left=(x+3)+'px';picker.style.top=(y+btn.offsetHeight+3)+'px';picker.style.marginLeft='0px';}else{picker.style.marginLeft='-10000px';}}function pickerClose(){var pobjs=getElementsByClass('picker');for(var i=0;i<pobjs.length;i++){pobjs[i].style.marginLeft='-10000px';}}function fixtxt(str){return str.replace(/\\n/g,"\n");}function createToolButton(icon,label,key,id){var btn=document.createElement('button');var ico=document.createElement('img');btn.className='toolbutton';btn.title=label;if(key){btn.title+=' ['+key.toUpperCase()+']';btn.accessKey=key;}if(id){btn.id=id;ico.id=id+'_ico';}if(icon.substr(0,1)=='/'){ico.src=icon;}else{ico.src=DOKU_BASE+'lib/images/toolbar/'+icon;}btn.appendChild(ico);return btn;}function createPicker(id,props,edid){var icobase=props['icobase'];var list=props['list'];var picker=document.createElement('div');picker.className='picker';if(props['class']){picker.className+=' '+props['class'];}picker.id=id;picker.style.position='absolute';picker.style.marginLeft='-10000px';for(var key in list){if(!list.hasOwnProperty(key))continue;if(isNaN(key)){var btn=document.createElement('button');btn.className='pickerbutton';var ico=document.createElement('img');if(list[key].substr(0,1)=='/'){ico.src=list[key];}else{ico.src=DOKU_BASE+'lib/images/'+icobase+'/'+list[key];}btn.title=key;btn.appendChild(ico);addEvent(btn,'click',bind(pickerInsert,key,edid));picker.appendChild(btn);}else if(isString(list[key])){var btn=document.createElement('button');btn.className='pickerbutton';var txt=document.createTextNode(list[key]);btn.title=list[key];btn.appendChild(txt);addEvent(btn,'click',bind(pickerInsert,list[key],edid));picker.appendChild(btn);}else{initToolbar(picker,edid,list);break;}}var body=document.getElementsByTagName('body')[0];body.appendChild(picker);return picker;}function pickerInsert(text,edid){insertAtCarret(edid,text);pickerClose();}function addBtnActionSignature(btn,props,edid){if(typeof(SIG)!='undefined'&&SIG!=''){addEvent(btn,'click',bind(insertAtCarret,edid,SIG));return true;}return false;}function keyHandler(e){if(e.keyCode!=13&&e.keyCode!=8&&e.keyCode!=32)return;var field=e.target;var selection=getSelection(field);var search="\n"+field.value.substr(0,selection.start);var linestart=Math.max(search.lastIndexOf("\n"),search.lastIndexOf("\r"));search=search.substr(linestart);if(e.keyCode==13){var match=search.match(/(\n  +([\*-] ?)?)/);if(match){var scroll=field.scrollHeight;insertAtCarret(field.id,match[1]);field.scrollTop+=(field.scrollHeight-scroll);e.preventDefault();return false;}}else if(e.keyCode==8){var match=search.match(/(\n  +)([*-] ?)$/);if(match){var spaces=match[1].length-1;if(spaces>3){field.value=field.value.substr(0,linestart)+field.value.substr(linestart+2);selection.start=selection.start-2;selection.end=selection.start;}else{field.value=field.value.substr(0,linestart)+field.value.substr(selection.start);selection.start=linestart;selection.end=linestart;}setSelection(selection);e.preventDefault();return false;}}else if(e.keyCode==32){var match=search.match(/(\n  +)([*-] )$/);if(match){field.value=field.value.substr(0,linestart)+'  '+field.value.substr(linestart);selection.start=selection.start+2;selection.end=selection.start;setSelection(selection);e.preventDefault();return false;}}}addInitEvent(function(){var field=$('wiki__text');if(!field)return;addEvent(field,'keydown',keyHandler);});function currentHeadlineLevel(textboxId){var field=$(textboxId);var selection=getSelection(field);var search="\n"+field.value.substr(0,selection.start);var lasthl=search.lastIndexOf("\n==");if(lasthl==-1&&field.form.prefix){search=field.form.prefix.value;lasthl=search.lastIndexOf("\n==");}search=search.substr(lasthl+1,6);if(search=='======')return 1;if(search.substr(0,5)=='=====')return 2;if(search.substr(0,4)=='====')return 3;if(search.substr(0,3)=='===')return 4;if(search.substr(0,2)=='==')return 5;return 0;}var textChanged=false;function changeCheck(msg){if(textChanged){var ok=confirm(msg);if(ok){var dwform=$('dw__editform');if(dwform){var params='call=draftdel';params+='&id='+encodeURIComponent(dwform.elements.id.value);var sackobj=new sack(DOKU_BASE+'lib/exe/ajax.php');sackobj.AjaxFailedAlert='';sackobj.encodeURIString=false;sackobj.runAJAX(params);}}return ok;}else{return true;}}function initChangeCheck(msg){var edit_text=document.getElementById('wiki__text');if(!edit_text)return;if(edit_text.readOnly)return;if(!$('dw__editform'))return;var links=document.getElementsByTagName('a');for(var i=0;i<links.length;i++){if(links[i].className.indexOf('JSnocheck')==-1){links[i].onclick=function(){var rc=changeCheck(msg);if(window.event)window.event.returnValue=rc;return rc;};}}var forms=document.forms;for(i=0;i<forms.length;i++){if(forms[i].className.indexOf('JSnocheck')==-1){forms[i].onsubmit=function(){var rc=changeCheck(msg);if(window.event)window.event.returnValue=rc;return rc;};}}var btn_save=document.getElementById('edbtn__save');btn_save.onclick=function(){textChanged=false;};var btn_prev=document.getElementById('edbtn__preview');btn_prev.onclick=function(){textChanged=false;};edit_text.onchange=function(){textChanged=true;summaryCheck();};var summary=document.getElementById('edit__summary');addEvent(summary,'change',summaryCheck);addEvent(summary,'keyup',summaryCheck);if(textChanged)summaryCheck();edit_text.focus();}function summaryCheck(){var sum=document.getElementById('edit__summary');if(sum.value===''){sum.className='missing';}else{sum.className='edit';}}function locktimer_class(){this.sack=null;this.timeout=0;this.timerID=null;this.lasttime=null;this.msg='';this.pageid='';};var locktimer=new locktimer_class();locktimer.init=function(timeout,msg,draft){locktimer.timeout=timeout*1000;locktimer.msg=msg;locktimer.draft=draft;locktimer.lasttime=new Date();if(!$('dw__editform'))return;locktimer.pageid=$('dw__editform').elements.id.value;if(!locktimer.pageid)return;locktimer.sack=new sack(DOKU_BASE+'lib/exe/ajax.php');locktimer.sack.AjaxFailedAlert='';locktimer.sack.encodeURIString=false;locktimer.sack.onCompletion=locktimer.refreshed;addEvent($('dw__editform').elements.wikitext,'keypress',function(){locktimer.refresh();});locktimer.reset();};locktimer.reset=function(){locktimer.clear();locktimer.timerID=window.setTimeout("locktimer.warning()",locktimer.timeout);};locktimer.warning=function(){locktimer.clear();alert(locktimer.msg);};locktimer.clear=function(){if(locktimer.timerID!==null){window.clearTimeout(locktimer.timerID);locktimer.timerID=null;}};locktimer.refresh=function(){var now=new Date();if(now.getTime()-locktimer.lasttime.getTime()>30*1000){var params='call=lock&id='+encodeURIComponent(locktimer.pageid);if(locktimer.draft){var dwform=$('dw__editform');params+='&prefix='+encodeURIComponent(dwform.elements.prefix.value);params+='&wikitext='+encodeURIComponent(dwform.elements.wikitext.value);params+='&suffix='+encodeURIComponent(dwform.elements.suffix.value);params+='&date='+encodeURIComponent(dwform.elements.date.value);}locktimer.sack.runAJAX(params);locktimer.lasttime=now;}};locktimer.refreshed=function(){var data=this.response;var error=data.charAt(0);data=data.substring(1);$('draft__status').innerHTML=data;if(error!='1')return;locktimer.reset();};var linkwiz={wiz:null,entry:null,result:null,timer:null,sack:null,textArea:null,selected:-1,selection:null,init:function(textArea){linkwiz.sack=new sack(DOKU_BASE+'lib/exe/ajax.php');linkwiz.sack.AjaxFailedAlert='';linkwiz.sack.encodeURIString=false;linkwiz.wiz=document.createElement('div');linkwiz.wiz.id='link__wiz';linkwiz.wiz.className='picker';linkwiz.wiz.style.top=(findPosY(textArea)+20)+'px';linkwiz.wiz.style.left=(findPosX(textArea)+80)+'px';linkwiz.wiz.style.marginLeft='-10000px';linkwiz.wiz.innerHTML='<div id="link__wiz_header">'+'<img src="'+DOKU_BASE+'lib/images/close.png" width="16" height="16" align="right" alt="" id="link__wiz_close" />'+LANG['linkwiz']+'</div>'+'<div>'+LANG['linkto']+' <input type="text" class="edit" id="link__wiz_entry" autocomplete="off" /></div>'+'<div id="link__wiz_result"></div>';textArea.form.parentNode.appendChild(linkwiz.wiz);linkwiz.textArea=textArea;linkwiz.result=$('link__wiz_result');linkwiz.entry=$('link__wiz_entry');var obj;obj=$('link__wiz_close');obj.onclick=linkwiz.hide;linkwiz.sack.elementObj=linkwiz.result;addEvent(linkwiz.entry,'keyup',linkwiz.onEntry);addEvent(linkwiz.result,'click',linkwiz.onResultClick);drag.attach(linkwiz.wiz,$('link__wiz_header'));},onEntry:function(e){if(e.keyCode==37||e.keyCode==39){return true;}if(e.keyCode==27){linkwiz.hide();e.preventDefault();e.stopPropagation();return false;}if(e.keyCode==38){linkwiz.select(linkwiz.selected-1);e.preventDefault();e.stopPropagation();return false;}if(e.keyCode==40){linkwiz.select(linkwiz.selected+1);e.preventDefault();e.stopPropagation();return false;}if(e.keyCode==13){if(linkwiz.selected>-1){var obj=linkwiz.getResult(linkwiz.selected);if(obj){var a=obj.getElementsByTagName('A')[0];linkwiz.resultClick(a);}}else if(linkwiz.entry.value){linkwiz.insertLink(linkwiz.entry.value);}e.preventDefault();e.stopPropagation();return false;}linkwiz.autocomplete();},getResult:function(num){var obj;var childs=linkwiz.result.getElementsByTagName('DIV');obj=childs[num];if(obj){return obj;}else{return null;}},select:function(num){if(num<0){linkwiz.deselect();return;}var obj=linkwiz.getResult(num);if(obj){linkwiz.deselect();obj.className+=' selected';if(obj.offsetTop>linkwiz.result.scrollTop+linkwiz.result.clientHeight){linkwiz.result.scrollTop+=obj.clientHeight;}else if(obj.offsetTop-linkwiz.result.clientHeight<linkwiz.result.scrollTop){linkwiz.result.scrollTop-=obj.clientHeight;}if((obj.offsetTop>linkwiz.result.scrollTop+linkwiz.result.clientHeight)||(obj.offsetTop<linkwiz.result.scrollTop)){obj.scrollIntoView();}linkwiz.selected=num;}},deselect:function(){if(linkwiz.selected>-1){var obj=linkwiz.getResult(linkwiz.selected);if(obj){obj.className=obj.className.replace(/ ?selected/,'');}}linkwiz.selected=-1;},onResultClick:function(e){if(e.target.tagName!='A')return;e.stopPropagation();e.preventDefault();linkwiz.resultClick(e.target);return false;},resultClick:function(a){var id=a.title;if(id==''||id.substr(id.length-1)==':'){linkwiz.entry.value=id;linkwiz.autocomplete_exec();}else{linkwiz.entry.value=id;if(a.nextSibling&&a.nextSibling.tagName=='SPAN'){linkwiz.insertLink(a.nextSibling.innerHTML);}else{linkwiz.insertLink('');}}},insertLink:function(title){if(!linkwiz.entry.value)return;var sel=getSelection(linkwiz.textArea);if(sel.start==0&&sel.end==0)sel=linkwiz.selection;var stxt=sel.getText();if(!stxt&&!DOKU_UHC)stxt=title;if(linkwiz.textArea.form['id'].value.indexOf(':')!=-1&&linkwiz.entry.value.indexOf(':')==-1){linkwiz.entry.value=':'+linkwiz.entry.value;}var link='[['+linkwiz.entry.value+'|';if(stxt)link+=stxt;link+=']]';var so=linkwiz.entry.value.length+3;var eo=2;pasteText(sel,link,{startofs:so,endofs:eo});linkwiz.hide();},autocomplete:function(){if(linkwiz.timer!==null){window.clearTimeout(linkwiz.timer);linkwiz.timer=null;}linkwiz.timer=window.setTimeout(linkwiz.autocomplete_exec,350);},autocomplete_exec:function(){linkwiz.deselect();linkwiz.result.innerHTML='<img src="'+DOKU_BASE+'lib/images/throbber.gif" alt="" width="16" height="16" />';linkwiz.sack.runAJAX('call=linkwiz&q='+encodeURI(linkwiz.entry.value));},clear:function(){linkwiz.result.innerHTML='Search for a matching page name above, or browse through the pages on the right';linkwiz.entry.value='';},show:function(){linkwiz.selection=getSelection(linkwiz.textArea);linkwiz.wiz.style.marginLeft='0px';linkwiz.entry.focus();linkwiz.autocomplete();},hide:function(){linkwiz.wiz.style.marginLeft='-10000px';linkwiz.textArea.focus();},toggle:function(){if(linkwiz.wiz.style.marginLeft=='-10000px'){linkwiz.show();}else{linkwiz.hide();}}};var media_manager={keepopen:false,hide:false,treeattach:function(obj){if(!obj)return;var items=obj.getElementsByTagName('li');for(var i=0;i<items.length;i++){var elem=items[i];var clicky=elem.getElementsByTagName('img')[0];clicky.style.cursor='pointer';addEvent(clicky,'click',function(event){return media_manager.toggle(event,this);});var link=elem.getElementsByTagName('a')[0];link.style.cursor='pointer';addEvent(link,'click',function(event){return media_manager.list(event,this);});}},selectorattach:function(obj){if(!obj)return;var items=getElementsByClass('select',obj,'a');for(var i=0;i<items.length;i++){var elem=items[i];elem.style.cursor='pointer';addEvent(elem,'click',function(event){return media_manager.select(event,this);});}items=getElementsByClass('example',obj,'div');for(var i=0;i<items.length;i++){elem=items[i];elem.style.display='none';}var file=$('upload__file');if(!file)return;addEvent(file,'change',media_manager.suggest);},confirmattach:function(obj){if(!obj)return;items=getElementsByClass('btn_media_delete',obj,'a');for(var i=0;i<items.length;i++){var elem=items[i];addEvent(elem,'click',function(e){if(e.target.tagName=='IMG'){var name=e.target.parentNode.title;}else{var name=e.target.title;}if(!confirm(LANG['del_confirm']+"\n"+name)){e.preventDefault();return false;}else{return true;}});}},attachoptions:function(obj){if(!obj)return;if(opener){var kobox=document.createElement('input');kobox.type='checkbox';kobox.id='media__keepopen';if(DokuCookie.getValue('keepopen')){kobox.checked=true;kobox.defaultChecked=true;media_manager.keepopen=true;}addEvent(kobox,'click',function(event){return media_manager.togglekeepopen(event,this);});var kolbl=document.createElement('label');kolbl.htmlFor='media__keepopen';kolbl.innerHTML=LANG['keepopen'];var kobr=document.createElement('br');obj.appendChild(kobox);obj.appendChild(kolbl);obj.appendChild(kobr);}var hdbox=document.createElement('input');hdbox.type='checkbox';hdbox.id='media__hide';if(DokuCookie.getValue('hide')){hdbox.checked=true;hdbox.defaultChecked=true;media_manager.hide=true;}addEvent(hdbox,'click',function(event){return media_manager.togglehide(event,this);});var hdlbl=document.createElement('label');hdlbl.htmlFor='media__hide';hdlbl.innerHTML=LANG['hidedetails'];var hdbr=document.createElement('br');obj.appendChild(hdbox);obj.appendChild(hdlbl);obj.appendChild(hdbr);media_manager.updatehide();},showsearchfield:function(event,link){var ajax=new sack(DOKU_BASE+'lib/exe/ajax.php');ajax.AjaxFailedAlert='';ajax.encodeURIString=false;if(ajax.failed)return true;cleanMsgArea();var content=$('media__content');content.innerHTML='<img src="'+DOKU_BASE+'lib/images/loading.gif" alt="..." class="load" />';ajax.elementObj=content;ajax.afterCompletion=function(){media_manager.selectorattach(content);media_manager.confirmattach(content);media_manager.updatehide();};ajax.runAJAX(link.search.substr(1)+'&call=mediasearchlist');return false;},togglekeepopen:function(event,cb){if(cb.checked){DokuCookie.setValue('keepopen',1);media_manager.keepopen=true;}else{DokuCookie.setValue('keepopen','');media_manager.keepopen=false;}},togglehide:function(event,cb){if(cb.checked){DokuCookie.setValue('hide',1);media_manager.hide=true;}else{DokuCookie.setValue('hide','');media_manager.hide=false;}media_manager.updatehide();},updatehide:function(){var obj=$('media__content');if(!obj)return;var details=getElementsByClass('detail',obj,'div');for(var i=0;i<details.length;i++){if(media_manager.hide){details[i].style.display='none';}else{details[i].style.display='';}}},select:function(event,link){var id=link.name.substr(2);if(!opener){var ex=$('ex_'+id.replace(/:/g,'_'));if(ex.style.display==''){ex.style.display='none';}else{ex.style.display='';}return false;}opener.insertTags('wiki__text','{{'+id+'|','}}','');if(!media_manager.keepopen)window.close();opener.focus();return false;},list:function(event,link){var ajax=new sack(DOKU_BASE+'lib/exe/ajax.php');ajax.AjaxFailedAlert='';ajax.encodeURIString=false;if(ajax.failed)return true;cleanMsgArea();var content=$('media__content');content.innerHTML='<img src="'+DOKU_BASE+'lib/images/loading.gif" alt="..." class="load" />';ajax.elementObj=content;ajax.afterCompletion=function(){media_manager.selectorattach(content);media_manager.confirmattach(content);media_manager.updatehide();media_manager.initFlashUpload();};ajax.runAJAX(link.search.substr(1)+'&call=medialist');return false;},toggle:function(event,clicky){var listitem=clicky.parentNode;var sublists=listitem.getElementsByTagName('ul');if(sublists.length){listitem.removeChild(sublists[0]);clicky.src=DOKU_BASE+'lib/images/plus.gif';return false;}var link=listitem.getElementsByTagName('a')[0];var ajax=new sack(DOKU_BASE+'lib/exe/ajax.php');ajax.AjaxFailedAlert='';ajax.encodeURIString=false;if(ajax.failed)return true;var ul=document.createElement('ul');listitem.appendChild(ul);ajax.elementObj=ul;ajax.afterCompletion=function(){media_manager.treeattach(ul);};ajax.runAJAX(link.search.substr(1)+'&call=medians');clicky.src=DOKU_BASE+'lib/images/minus.gif';return false;},suggest:function(){var file=$('upload__file');var name=$('upload__name');if(!file||!name)return;var text=file.value;text=text.substr(text.lastIndexOf('/')+1);text=text.substr(text.lastIndexOf('\\')+1);name.value=text;},initFlashUpload:function(){if(!hasFlash(8))return;var oform=$('dw__upload');var oflash=$('dw__flashupload');if(!oform||!oflash)return;var clicky=document.createElement('img');clicky.src=DOKU_BASE+'lib/images/multiupload.png';clicky.title=LANG['mu_btn'];clicky.alt=LANG['mu_btn'];clicky.style.cursor='pointer';clicky.onclick=function(){oform.style.display='none';oflash.style.display='';};oform.appendChild(clicky);}};addInitEvent(function(){media_manager.treeattach($('media__tree'));media_manager.selectorattach($('media__content'));media_manager.confirmattach($('media__content'));media_manager.attachoptions($('media__opts'));media_manager.initFlashUpload();});acl={init:function(){this.ctl=$('acl_manager');if(!this.ctl)return;var sel=$('acl__user').getElementsByTagName('select')[0];addEvent(sel,'change',acl.userselhandler);addEvent($('acl__tree'),'click',acl.treehandler);addEvent($('acl__user').getElementsByTagName('input')[1],'click',acl.loadinfo);},userselhandler:function(e){if(this.value=='__g__'||this.value=='__u__'){$('acl__user').getElementsByTagName('input')[0].style.display='';$('acl__user').getElementsByTagName('input')[1].style.display='';}else{$('acl__user').getElementsByTagName('input')[0].style.display='none';$('acl__user').getElementsByTagName('input')[1].style.display='none';}acl.loadinfo();},loadinfo:function(){var frm=$('acl__detail').getElementsByTagName('form')[0];var ajax=new sack(DOKU_BASE+'lib/plugins/acl/ajax.php');ajax.AjaxFailedAlert='';ajax.encodeURIString=false;if(ajax.failed)return true;var data=Array();data[0]=ajax.encVar('ns',frm.elements['ns'].value);data[1]=ajax.encVar('id',frm.elements['id'].value);data[2]=ajax.encVar('acl_t',frm.elements['acl_t'].value);data[3]=ajax.encVar('acl_w',frm.elements['acl_w'].value);data[4]=ajax.encVar('sectok',frm.elements['sectok'].value);data[5]=ajax.encVar('ajax','info');ajax.elementObj=$('acl__info');ajax.runAJAX(data.join('&'));return false;},parseatt:function(str){if(str[0]=='?')str=str.substr(1);var attributes={};var all=str.split('&');for(var i=0;i<all.length;i++){var att=all[i].split('=');attributes[att[0]]=decodeURIComponent(att[1]);}return attributes;},hsc:function(str){str=str.replace(/&/g,"&amp;");str=str.replace(/\"/g,"&quot;");str=str.replace(/\'/g,"&#039;");str=str.replace(/</g,"&lt;");str=str.replace(/>/g,"&gt;");return str;},treetoggle:function(clicky){var listitem=clicky.parentNode.parentNode;var sublists=listitem.getElementsByTagName('ul');if(sublists.length){listitem.removeChild(sublists[0]);clicky.src=DOKU_BASE+'lib/images/plus.gif';clicky.alt='+';return false;}var link=listitem.getElementsByTagName('a')[0];var ajax=new sack(DOKU_BASE+'lib/plugins/acl/ajax.php');ajax.AjaxFailedAlert='';ajax.encodeURIString=false;if(ajax.failed)return true;var ul=document.createElement('ul');listitem.appendChild(ul);ajax.elementObj=ul;ajax.runAJAX(link.search.substr(1)+'&ajax=tree');clicky.src=DOKU_BASE+'lib/images/minus.gif';return false;},treehandler:function(e){if(e.target.src){acl.treetoggle(e.target);}else if(e.target.href){var obj=getElementsByClass('cur',$('acl__tree'),'a');for(var i=0;i<obj.length;i++){obj[i].className=obj[i].className.replace(/ cur/,'');}e.target.className+=' cur';var frm=$('acl__detail').getElementsByTagName('form')[0];if(e.target.className.search(/wikilink1/)>-1){frm.elements['ns'].value='';frm.elements['id'].value=acl.hsc(acl.parseatt(e.target.search)['id']);}else if(e.target.className.search(/idx_dir/)>-1){frm.elements['ns'].value=acl.hsc(acl.parseatt(e.target.search)['ns']);frm.elements['id'].value='';}acl.loadinfo();}e.stopPropagation();e.preventDefault();return false;}};addInitEvent(acl.init);function usrmgr_delconfirm(){if($('usrmgr__del')){addEvent($('usrmgr__del'),'click',function(){return confirm(reallyDel);});}};addInitEvent(usrmgr_delconfirm);function WindowSize(){this.w=0;this.h=0;return this.update();}WindowSize.prototype.update=function(){var d=document;this.w=(window.innerWidth)?window.innerWidth:(d.documentElement&&d.documentElement.clientWidth)?d.documentElement.clientWidth:d.body.clientWidth;this.h=(window.innerHeight)?window.innerHeight:(d.documentElement&&d.documentElement.clientHeight)?d.documentElement.clientHeight:d.body.clientHeight;return this;};function PageSize(){this.win=new WindowSize();this.w=0;this.h=0;return this.update();}PageSize.prototype.update=function(){var d=document;this.w=(window.innerWidth&&window.scrollMaxX)?window.innerWidth+window.scrollMaxX:(d.body.scrollWidth>d.body.offsetWidth)?d.body.scrollWidth:d.body.offsetWidt;this.h=(window.innerHeight&&window.scrollMaxY)?window.innerHeight+window.scrollMaxY:(d.body.scrollHeight>d.body.offsetHeight)?d.body.scrollHeight:d.body.offsetHeight;this.win.update();if(this.w<this.win.w)this.w=this.win.w;if(this.h<this.win.h)this.h=this.win.h;return this;};function PagePos(){this.x=0;this.y=0;return this.update();}PagePos.prototype.update=function(){var d=document;this.x=(window.pageXOffset)?window.pageXOffset:(d.documentElement&&d.documentElement.scrollLeft)?d.documentElement.scrollLeft:(d.body)?d.body.scrollLeft:0;this.y=(window.pageYOffset)?window.pageYOffset:(d.documentElement&&d.documentElement.scrollTop)?d.documentElement.scrollTop:(d.body)?d.body.scrollTop:0;return this;};function UserAgent(){var ua=navigator.userAgent;this.isWinIE=this.isMacIE=false;this.isGecko=ua.match(/Gecko\//);this.isSafari=ua.match(/AppleWebKit/);this.isOpera=window.opera;if(document.all&&!this.isGecko&&!this.isSafari&&!this.isOpera){this.isWinIE=ua.match(/Win/);this.isMacIE=ua.match(/Mac/);this.isNewIE=(ua.match(/MSIE 5\.5/)||ua.match(/MSIE 6\.0/));}return this;}function LightBox(option){var self=this;self._imgs=new Array();self._wrap=null;self._box=null;self._open=-1;self._page=new PageSize();self._pos=new PagePos();self._ua=new UserAgent();self._expandable=false;self._expanded=false;self._expand=option.expandimg;self._shrink=option.shrinkimg;return self._init(option);}LightBox.prototype={_init:function(option){var self=this;var d=document;if(!d.getElementsByTagName)return;var links=d.getElementsByTagName("a");for(var i=0;i<links.length;i++){var anchor=links[i];var num=self._imgs.length;if(!anchor.getAttribute("href")||anchor.getAttribute("rel")!="lightbox")continue;self._imgs[num]={src:anchor.getAttribute("href"),w:-1,h:-1,title:'',cls:anchor.className};if(anchor.getAttribute("title"))self._imgs[num].title=anchor.getAttribute("title");else if(anchor.firstChild&&anchor.firstChild.getAttribute&&anchor.firstChild.getAttribute("title"))self._imgs[num].title=anchor.firstChild.getAttribute("title");anchor.onclick=self._genOpener(num);}var body=d.getElementsByTagName("body")[0];self._wrap=self._createWrapOn(body,option.loadingimg);self._box=self._createBoxOn(body,option);return self;},_genOpener:function(num){var self=this;return function(){self._show(num);if(window.event)window.event.returnValue=false;return false;}},_createWrapOn:function(obj,imagePath){var self=this;if(!obj)return null;var wrap=document.createElement('div');wrap.id='gallery__overlay';with(wrap.style){display='none';position='fixed';top='0px';left='0px';zIndex='50';width='100%';height='100%';}if(self._ua.isWinIE)wrap.style.position='absolute';addEvent(wrap,"click",function(){self._close();});obj.appendChild(wrap);var imag=new Image;imag.onload=function(){var spin=document.createElement('img');spin.id='gallery__loadingImage';spin.src=imag.src;spin.style.position='relative';self._set_cursor(spin);addEvent(spin,'click',function(){self._close();});wrap.appendChild(spin);imag.onload=function(){};};if(imagePath!='')imag.src=imagePath;return wrap;},_createBoxOn:function(obj,option){var self=this;if(!obj)return null;var box=document.createElement('div');box.id='gallery__lightbox';with(box.style){display='none';position='absolute';zIndex='60';}obj.appendChild(box);var img=document.createElement('img');img.id='gallery__lightboxImage';self._set_cursor(img);addEvent(img,'click',function(){self._close();});addEvent(img,'mouseover',function(){self._show_action();});addEvent(img,'mouseout',function(){self._hide_action();});box.appendChild(img);var zoom=document.createElement('img');zoom.id='gallery__actionImage';with(zoom.style){display='none';position='absolute';top='15px';left='15px';zIndex='70';}self._set_cursor(zoom);zoom.src=self._expand;addEvent(zoom,'mouseover',function(){self._show_action();});addEvent(zoom,'click',function(){self._zoom();});box.appendChild(zoom);addEvent(window,'resize',function(){self._set_size(true);});if(option.closeimg){var btn=document.createElement('img');btn.id='gallery__closeButton';with(btn.style){display='inline';position='absolute';right='10px';top='10px';zIndex='80';}btn.src=option.closeimg;self._set_cursor(btn);addEvent(btn,'click',function(){self._close();});box.appendChild(btn);}if(option.nextimg){var btn=document.createElement('img');btn.id='gallery__nextButton';with(btn.style){display='inline';position='absolute';right='10px';bottom='10px';zIndex='80';}btn.src=option.nextimg;self._set_cursor(btn);addEvent(btn,'click',function(){self._move(+1)});box.appendChild(btn);}if(option.previmg){var btn=document.createElement('img');btn.id='gallery__prevButton';with(btn.style){display='inline';position='absolute';left='10px';bottom='10px';zIndex='80';}btn.src=option.previmg;self._set_cursor(btn);addEvent(btn,'click',function(){self._move(-1)});box.appendChild(btn);}var caption=document.createElement('span');caption.id='gallery__lightboxCaption';with(caption.style){display='none';position='absolute';zIndex='80';}box.appendChild(caption);return box;},_set_photo_size:function(){var self=this;if(self._open==-1)return;var imag=self._box.firstChild;var targ={w:self._page.win.w-30,h:self._page.win.h-30};var orig={w:self._imgs[self._open].w,h:self._imgs[self._open].h};var ratio=1.0;if((orig.w>=targ.w||orig.h>=targ.h)&&orig.h&&orig.w)ratio=((targ.w/orig.w)<(targ.h/orig.h))?targ.w/orig.w:targ.h/orig.h;imag.width=Math.floor(orig.w*ratio);imag.height=Math.floor(orig.h*ratio);self._expandable=(ratio<1.0)?true:false;if(self._ua.isWinIE)self._box.style.display="block";self._box.style.top=[self._pos.y+(self._page.win.h-imag.height-30)/2,'px'].join('');self._box.style.left=[((self._page.win.w-imag.width-30)/2),'px'].join('');self._show_caption(true);},_set_size:function(onResize){var self=this;if(self._open==-1)return;self._page.update();self._pos.update();var spin=self._wrap.firstChild;if(spin){var top=(self._page.win.h-spin.height)/2;if(self._wrap.style.position=='absolute')top+=self._pos.y;spin.style.top=[top,'px'].join('');spin.style.left=[(self._page.win.w-spin.width-30)/2,'px'].join('');}if(self._ua.isWinIE){self._wrap.style.width=[self._page.win.w,'px'].join('');self._wrap.style.height=[self._page.h,'px'].join('');}if(onResize)self._set_photo_size();},_show_action:function(){var self=this;if(self._open==-1||!self._expandable)return;var obj=document.getElementById('gallery__actionImage');if(!obj)return;obj.src=(self._expanded)?self._shrink:self._expand;obj.style.display='inline';},_hide_action:function(){var self=this;var obj=document.getElementById('gallery__actionImage');if(obj)obj.style.display='none';},_zoom:function(){var self=this;if(self._expanded){self._set_photo_size();self._expanded=false;}else if(self._open>-1){var imag=self._box.firstChild;self._box.style.top=[self._pos.y,'px'].join('');self._box.style.left='0px';imag.width=self._imgs[self._open].w;imag.height=self._imgs[self._open].h;self._show_caption(false);self._expanded=true;}self._show_action();},_show_caption:function(enable){var self=this;var caption=document.getElementById('gallery__lightboxCaption');if(!caption)return;if(caption.innerHTML.length==0||!enable){caption.style.display='none';}else{var imag=self._box.firstChild;with(caption.style){top=[imag.height+10,'px'].join('');left='0px';width=[imag.width+20,'px'].join('');height='1.2em';display='block';}}},_move:function(by){var self=this;var num=self._open+by;if(num<0)num=self._imgs.length-1;if(num>=self._imgs.length)num=0;self._disable_keyboard();self._hide_action();self._box.style.display="none";self._show(num);},_show:function(num){var self=this;var imag=new Image;if(num<0||num>=self._imgs.length)return;var loading=document.getElementById('gallery__loadingImage');var caption=document.getElementById('gallery__lightboxCaption');self._open=num;self._set_size(false);self._wrap.style.display="block";if(loading)loading.style.display='inline';imag.onload=function(){if(self._imgs[self._open].w==-1){self._imgs[self._open].w=imag.width;self._imgs[self._open].h=imag.height;}if(caption)caption.innerHTML=self._imgs[self._open].title;self._set_photo_size();self._hide_action();self._box.style.display="block";self._box.firstChild.src=imag.src;self._box.firstChild.setAttribute('title',self._imgs[self._open].title);if(loading)loading.style.display='none';};self._expandable=false;self._expanded=false;self._enable_keyboard();imag.src=self._imgs[self._open].src;self._preload_neighbors(num);},_preload_neighbors:function(num){var self=this;if((self._imgs.length-1)>num){var preloadNextImage=new Image();preloadNextImage.src=self._imgs[num+1].src;}if(num>0){var preloadPrevImage=new Image();preloadPrevImage.src=self._imgs[num-1].src;}},_set_cursor:function(obj){var self=this;if(self._ua.isWinIE&&!self._ua.isNewIE)return;obj.style.cursor='pointer';},_close:function(){var self=this;self._open=-1;self._disable_keyboard();self._hide_action();self._wrap.style.display="none";self._box.style.display="none";},_enable_keyboard:function(){__lightbox=this;addEvent(document,'keydown',this._keyboard_action);},_disable_keyboard:function(){delete __lightbox;removeEvent(document,'keydown',this._keyboard_action);},_keyboard_action:function(e){var self=__lightbox;var keycode=0;if(e.which){keycode=e.which;}else{keycode=event.keyCode;}var key=String.fromCharCode(keycode).toLowerCase();if((key=='x')||(key=='c')||(keycode==27)){self._close();}else if((key=='p')||(keycode==37)){self._move(-1);}else if(key=='n'||(keycode==39)){self._move(+1);}}};function gallery_plugin(){var opts=$('media__opts');if(!opts)return;if(!window.opener)return;var glbl=document.createElement('label');var glnk=document.createElement('a');var gbrk=document.createElement('br');glnk.name='gallery_plugin';glnk.innerHTML='Add namespace as gallery';glnk.style.cursor='pointer';glnk.onclick=function(){var h1=$('media__ns');if(!h1)return;var ns=h1.innerHTML;opener.insertAtCarret('wiki__text','{{gallery>'+ns+'}}');if(!media.keepopen)window.close();};opts.appendChild(glbl);glbl.appendChild(glnk);opts.appendChild(gbrk);}addInitEvent(function(){var lightbox=new LightBox({loadingimg:DOKU_BASE+'lib/plugins/gallery/images/loading.gif',expandimg:DOKU_BASE+'lib/plugins/gallery/images/expand.gif',shrinkimg:DOKU_BASE+'lib/plugins/gallery/images/shrink.gif',closeimg:DOKU_BASE+'lib/plugins/gallery/images/close.gif',nextimg:DOKU_BASE+'lib/plugins/gallery/images/next.gif',previmg:DOKU_BASE+'lib/plugins/gallery/images/prev.gif'});gallery_plugin();});CompleteMenuSolution=function(){var self=this,menuId=null,dependencies=[],transitions=[],modifiers=[],cssClasses={'root':'CmsListMenu','folder':'CmsMenuItemFolder','folderOpen':'CmsMenuItemFolderExpanded','folderClosed':'CmsMenuItemFolderCollapsed','menuItem':'CmsMenuItemFile','evenLevel':'CmsMenuItemEvenLevel','oddLevel':'CmsMenuItemOddLevel','menuLevel':'CmsMenuItemLevel'},menuOptions={'theme':{'name':'','options':{}},'transitions':{},themeRootPath:null,maxDepth:0,maxOpenDepth:0,forceSkipTransitions:false,interval:10,length:100,openTimeout:0,closeTimeout:0,toggleMenuOnClick:0,closeSiblings:true,incrementalConvert:true,handlers:{onOpen:[],onClose:[],onChangeState:[]},stripCssClasses:{'root':[],'ul':[],'li':[],'a':[]},flagOpenClass:cssClasses['folderOpen'],flagClosedClass:cssClasses['folderClosed'],appendTemplateSuffix:false,dummy:null},keys={'cmsSelf':'__cmsSelf','openFlag':'__isOpen','interval':'__interval','timeout':'__timeout','isRoot':'__isRoot','isFolder':'__isFolder','parentNode':'__parentNode','submenu':'__submenu','menuLevel':'__menuLevel','activator':'__activator'},___________________________Publis____________________________;this.setMenuOption=function(n,v){if(menuOptions[n]&&typeof menuOptions[n]!=typeof v)return false;menuOptions[n]=v;return true};this.initMenu=function(mid,options){menuId=mid;menuOptions.theme.merge(options.theme);if(options.themeRootPath)menuOptions.themeRootPath=options.themeRootPath;loader.init(options);convertMenuById()};this.getThemePath=function(skin){if(!/^[-a-z0-9\/]*$/.test(name.toLowerCase()))return false;var sp=menuOptions.theme.name.split('/');return gluePath(menuOptions.themeRootPath?menuOptions.themeRootPath:gluePath(self.cmsRoot,'templates'),(skin?menuOptions.theme.name:sp[0]))};this.reinitSubmenu=function(el){if(!el||!el.tagName)return;var omd=menuOptions.maxDepth;switch(el.tagName.toLowerCase()){case"li":menuOptions.maxDepth=el[keys['parentNode']][keys['menuLevel']]+2;convertMenu(el[keys['submenu']],el[keys['parentNode']][keys['menuLevel']]+1);break};menuOptions.maxDepth=omd};var stripCssClasses=function(css,node){try{for(var i=css.length;i>=0;i--){if(menuOptions.stripCssClasses[node].indexOf(css[i])<0)continue;css.splice(i,1)}}catch(e){}return css},applyModifiers=function(node,type){var run={};if(isUndefined(type)||'string'!=typeof type)type=node.tagName.toLowerCase();for(var mod=0,smL=modifiers.length;mod<smL;mod++){if(self.modifier[modifiers[mod]].runat!=type||!isUndefined(run[modifiers[mod]]))continue;self.modifier[modifiers[mod]].mod.call(self.modifier[modifiers[mod]],node,keys,cssClasses,menuOptions);run[modifiers[mod]]=true}run=null};var loader=new function(){var ls=this,options=null,head=document.getElementsByTagName('head')[0],applySS=function(sn){if(!isUndefined(self.loadedStylesheets[sn]))return;head.appendChild(document.createElementExt('link',{'param':{'rel':'stylesheet','type':'text/css','href':sn}}));self.loadedStylesheets[sn]=true},applyJS=function(sn){if(!isUndefined(self.loadedJS[sn]))return;head.appendChild(document.createElementExt('script',{'param':{'type':'text/javascript','defer':true,'src':sn}}));self.loadedJS[sn]=true};this.transitionOnload=function(name,cntr){if(cntr>=10000){self.transition[name]=true;return}if(!self.transition[name]){setTimeout(function(){ls.transitionOnload(name,cntr+10)},10);return}transitions[transitions.length]=self.transition[name];if('function'==typeof self.transition[name].init)self.transition[name].init.call(self.transition[name],menuOptions,cssClasses,keys)};this.themeOnload=function(name){transitions=[self.transition['default']];menuOptions.merge(options);for(var i in menuOptions.transitions){if(!menuOptions.transitions.hasOwnProperty(i))continue;if(!self.transition[i])applyJS(gluePath(self.cmsRoot,'transitions',i+'.js'));playTimeout(this.transitionOnload,1,[i,0])};if(menuOptions.modifiers&&menuOptions.modifiers.length>0){for(var i=0,tL=menuOptions.modifiers.length;i<tL;i++){if(!self.modifier[menuOptions.modifiers[i]]){if(isUndefined(self.modifier[menuOptions.modifiers[i]]))self.modifier[menuOptions.modifiers[i]]=menuOptions.modifiers[i];applyJS(gluePath(self.cmsRoot,'modifiers',menuOptions.modifiers[i]+'.js'))};dependencies[dependencies.length]=['modifier',menuOptions.modifiers[i]];modifiers.push(menuOptions.modifiers[i])}}};this.init=function(o){options=o;applySS(gluePath(self.getThemePath(),'layout.css'));applySS(gluePath(self.getThemePath(true),'design.css'));applyJS(gluePath(self.getThemePath(),'template.js'));var sp=menuOptions.theme.name.split('/');if(isUndefined(self.theme[sp[0]]))self.theme[sp[0]]=sp[0];dependencies[dependencies.length]=['theme',sp[0]]}};var menuItemEventHandler=function(e){if(getParent(e.srcElement||e.target,keys.isRoot,true)[keys.cmsSelf]!=self)return;var el=getParent(e.srcElement||e.target,'li'),cel=el;while(el&&!el[keys['parentNode']]&&cel!=(cel=getParent(el,keys['isFolder'],true)))self.reinitSubmenu(cel);if(!el)return;switch(e.type.toLowerCase()){case"mouseover":case"mouseout":while(!el[keys['isRoot']]){if(el[keys['isFolder']]){if(parseInt(el[keys['timeout']]))clearTimeout(el[keys['timeout']]);el[keys['timeout']]=null;switch(e.type.toLowerCase()){case'mouseover':if(!el[keys['openFlag']])el[keys['timeout']]=playTimeout(playOpenClose,menuOptions.openTimeout,[el,'open']);break;case'mouseout':if(el[keys['openFlag']]&&parseInt(menuOptions.closeTimeout))el[keys['timeout']]=playTimeout(playOpenClose,menuOptions.closeTimeout,[el,'close']);break}}el=el[keys['parentNode']]}break;case"mouseup":if(!el[keys['isFolder']]||(el[keys['submenu']][keys['interval']]&&el[keys['submenu']][keys['interval']].interval))return;clearTimeout(el[keys['timeout']]);if(menuOptions['toggleMenuOnClick']&&(menuOptions['toggleMenuOnClick']^el[keys['openFlag']]*2))playOpenClose(el,'toggle');break}},playOpenClose=function(el,flag){var isOpen,i,player;if(flag!='toggle'&&el[keys['openFlag']]==(flag=='open'))return;switch(flag.toLowerCase()){case'open':flag='Open';break;case'close':flag='Close';break;case'toggle':flag=el[keys['openFlag']]?'Close':'Open';break;default:return};if(el[keys['openFlag']]!=(flag=='Open'))callEventHandlers(el,flag);if(null==el[keys['submenu']][keys['menuLevel']])self.reinitSubmenu(el);isOpen=el[keys['openFlag']]=(flag=='Open');if(menuOptions['closeSiblings']&&isOpen)for(i=0,sL=el[keys['parentNode']][keys['submenu']].length;i<sL;i++)if(el[keys['parentNode']][keys['submenu']][i][keys['openFlag']]&&el[keys['parentNode']][keys['submenu']][i]!=el&&el[keys['parentNode']][keys['submenu']][i][keys['isFolder']])playOpenClose(el[keys['parentNode']][keys['submenu']][i],'close');el=el[keys['submenu']];player=function(el,t,e){var i,tL=t.length,eL=e.length;var dt=(new Date).valueOf();el[keys['interval']].pg=Math.round(el[keys['interval']].pg+(dt-el[keys['interval']].start)*100/menuOptions.length);el[keys['interval']].start=dt;if(el[keys['interval']].pg>100)el[keys['interval']].pg=100;el[keys['interval']].pg_delta=el[keys['interval']].pg/100;for(i=0;i<tL;i++){if(null==t[i])continue;if(!t[i][0].call(t[i][1],el,menuOptions,cssClasses,keys)){t.splice(i,1);i--;tL--}};if(0==t.length){for(i=0;i<eL;i++)e[i][0].call(e[i][1],el,menuOptions,cssClasses,keys);clearInterval(el[keys['interval']].interval);el[keys['interval']].interval=false;menuOptions['forceSkipTransitions']=false}};if(el[keys['interval']]){clearInterval(el[keys['interval']].interval);el[keys['interval']].pg=100-el[keys['interval']].pg;el[keys['interval']].pg_delta=el[keys['interval']].pg/100}else{el[keys['interval']]={'pg':0,'pg_delta':0}};var f,t=[],e=[];for(i=0,mL=transitions.length;i<mL;i++){f=transitions[i]['init'+flag];if(typeof f=='function')f.call(transitions[i],el,menuOptions,cssClasses,keys);f=transitions[i]['play'+flag];if(!menuOptions['forceSkipTransitions']&&typeof f=='function')t[t.length]=[f,transitions[i]];f=transitions[i]['finish'+flag];if(typeof f=='function')e[e.length]=[f,transitions[i]]};el[keys['interval']].start=(new Date).valueOf();el[keys['interval']].interval=setInterval(function(){player(el,t,e)},menuOptions.interval)},callEventHandlers=function(el,flag){if(!menuOptions.handlers)return;var _call=function(el,h){if(menuOptions.handlers[h]instanceof Array){for(var i=0,mL=menuOptions.handlers[h].length;i<mL;i++){try{menuOptions.handlers[h][i][1].call(menuOptions.handlers[h][i][0],el,keys,cssClasses,menuOptions)}catch(e){}}}},h='on'+flag;_call(el,h);_call(el,'onChangeState')},convertMenu=function(el,level){if(menuOptions['maxDepth']&&level>menuOptions['maxDepth']-1&&(el[keys['parentNode']]&&el[keys['parentNode']][keys['openFlag']]===false))return;el[keys['menuLevel']]=level;var dummy=document.createElement('div');el.parentNode.replaceChild(dummy,el);level++;el[keys['submenu']]=[];for(var i=0,cL=el.childNodes.length;i<cL;i++){if(!el.childNodes[i].tagName||el.childNodes[i].tagName.toLowerCase()!='li')continue;el[keys['submenu']][el[keys['submenu']].length]=el.childNodes[i];el.style.display='';el.childNodes[i][keys['parentNode']]=el;var tmp=el.childNodes[i].className.split(' ');el.childNodes[i][keys['openFlag']]=((level<menuOptions.maxOpenDepth||tmp.indexOf(menuOptions.flagOpenClass)>-1)&&tmp.indexOf(menuOptions.flagClosedClass)<0);tmp=stripCssClasses(tmp,'li');convertMenuItem(el.childNodes[i],level);if(!isUndefined(el.childNodes[i][keys['submenu']])){tmp[tmp.length]=cssClasses['folder'];tmp[tmp.length]=cssClasses[el.childNodes[i][keys['openFlag']]?'folderOpen':'folderClosed'];el.childNodes[i][keys['isFolder']]=true}else{tmp[tmp.length]=cssClasses['menuItem'];el.childNodes[i][keys['isFolder']]=false}tmp[tmp.length]=cssClasses['menuLevel'].split(" ").map(function(el){return el+level}).join(" ");tmp[tmp.length]=cssClasses[level%2?'evenLevel':'oddLevel'];el.childNodes[i].className=tmp.join(' ');applyModifiers(el.childNodes[i]);var a=el.childNodes[i].firstChild;while(null!=a&&(!a.tagName||(a.tagName&&a.tagName.toLowerCase()!='a')))a=a.nextSibling;if(a){el.childNodes[i][keys['activator']]=a;a[keys['parentNode']]=el.childNodes[i];var tmp=a.className.split(' ');tmp=stripCssClasses(tmp,'a');a.className=tmp.join(" ");applyModifiers(a)}};if(el[keys['submenu']].length<1){el[keys['parentNode']][keys['openFlag']]=false}dummy.parentNode.replaceChild(el,dummy);dummy=null},convertMenuItem=function(el,level){for(var i=0,cL=el.childNodes.length;i<cL;i++){if(!el.childNodes[i].tagName||el.childNodes[i].tagName.toLowerCase()!='ul')continue;var tmp=el.childNodes[i].className.split(" ");tmp=stripCssClasses(tmp,'ul');el.childNodes[i].className=tmp.join(" ");el[keys['submenu']]=el.childNodes[i];el.childNodes[i][keys['parentNode']]=el;if(!menuOptions.incrementalConvert||el[keys['openFlag']]||level<menuOptions['maxDepth']-1)convertMenu(el[keys['submenu']],level);applyModifiers(el.childNodes[i])}},convertMenuById=function(){var el=document.getElementById(menuId);if(!el||!dpdLoaded()){setTimeout(convertMenuById,10);return}menuOptions.stripCssClasses.li.push(menuOptions.flagOpenClass);menuOptions.stripCssClasses.li.push(menuOptions.flagClosedClass);if(menuOptions.appendTemplateSuffix){var n=menuOptions.theme.name.split("/"),s=n[0],n=n.join("");for(var i in cssClasses){if(cssClasses.hasOwnProperty(i)&&'root'!=i)cssClasses[i]=cssClasses[i]+s+' '+cssClasses[i]+n}};var tmp=el.className.split(" ");tmp=stripCssClasses(tmp,'root');tmp[tmp.length]=cssClasses.root;var n=menuOptions.theme.name.split("/"),s="";for(var i=0,nL=n.length;i<nL;i++){s+=n[i];tmp[tmp.length]=cssClasses.root+s}el.className=tmp.join(" ");el[keys['isRoot']]=true;convertMenu(el,-1);if(menuOptions.openTimeout){el.attachEvent('onmouseover',menuItemEventHandler);el.attachEvent('onmouseout',menuItemEventHandler)}el.attachEvent('onmouseup',menuItemEventHandler);el.style.display='';applyModifiers(el,'root');el[keys['cmsSelf']]=self};var dpdLoaded=function(){var i,dL=dependencies.length,dp;for(i=0;i<dL;i++){if(isNaN(dependencies[i][3]))dependencies[i][3]=0;dp=self[dependencies[i][0]][dependencies[i][1]];if('string'!=typeof dp){if(dp.menuOptions)menuOptions.merge(dp.menuOptions,dependencies[i][0]=='theme');if(dp.init)dp.init.call(dp,menuOptions,cssClasses,keys);if(loader[dependencies[i][0]+'Onload'])loader[dependencies[i][0]+'Onload'](dependencies[i][1]);dependencies.splice(i,1);i--;dL--}else if(dependencies[i][3]>=10000){throw Error("Resource could not be loaded: "+dependencies[i][0]+" - "+dependencies[i][1])}else{dependencies[i][3]+=10}}return!dependencies.length}};CompleteMenuSolution.prototype.cmsRoot=DOKU_BASE+"lib/plugins/indexmenu/cms/";CompleteMenuSolution.prototype.loadedStylesheets={};CompleteMenuSolution.prototype.loadedJS={};CompleteMenuSolution.prototype.theme={};CompleteMenuSolution.prototype.transition={'default':{'initOpen':function(C,v,i,c){C=C[c['parentNode']];var I=C.className.split(" "),O=i.folderClosed.split(" "),l;for(var V=0,o=O.length;V<o;V++){l=I.indexOf(O[V]);if(l>-1)I.splice(l,1)};O=i.folderOpen.split(" ");for(var V=0,o=O.length;V<o;V++){l=I.indexOf(O[V]);if(l>-1)I.splice(l,1)};I[I.length]=i.folderOpen;C.className=I.join(" ")},'finishClose':function(C,v,i,c){C=C[c['parentNode']];var I=C.className.split(" "),O=i.folderOpen.split(" "),l;for(var V=0,o=O.length;V<o;V++){l=I.indexOf(O[V]);if(l>-1)I.splice(l,1)};O=i.folderClosed.split(" ");for(var V=0,o=O.length;V<o;V++){l=I.indexOf(O[V]);if(l>-1)I.splice(l,1)};I[I.length]=i.folderClosed;C.className=I.join(" ")}}};CompleteMenuSolution.prototype.modifier={};CompleteMenuSolution.prototype.requires=['extensions/helpers.js','extensions/objectextensions.js','extensions/functionextensions.js','extensions/arrayextensions.js','extensions/domextensions.js'];for(var i=0,cL=CompleteMenuSolution.prototype.requires.length;i<cL;i++){document.write("<scr"+"ipt type=\"text/javascript\" src=\""+CompleteMenuSolution.prototype.cmsRoot+CompleteMenuSolution.prototype.requires[i]+"\" ></script>")}addInitEvent(function(){ajax_qsearch.init('qsearch__in','qsearch__out');});addInitEvent(function(){addEvent(document,'click',closePopups);});addInitEvent(function(){addTocToggle();});addInitEvent(function(){initSizeCtl('size__ctl','wiki__text');});addInitEvent(function(){initToolbar('tool__bar','wiki__text',toolbar);});addInitEvent(function(){initChangeCheck('Unsaved changes will be lost.\nReally continue?');});addInitEvent(function(){locktimer.init(840,'Your lock for editing this page is about to expire in a minute.\nTo avoid conflicts use the preview button to reset the locktimer.',1);});addInitEvent(function(){scrollToMarker();});addInitEvent(function(){focusMarker();});
